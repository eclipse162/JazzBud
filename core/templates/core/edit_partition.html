{% extends 'core/base.html' %} {% load static %} {% load custom_filters %}
{%block title %} Edit a Partition {% endblock %} {% block content %}

<link
  rel="stylesheet"
  type="text/css"
  href="{% static 'css/album_page.css' %}" />

<div class="track-header">
  <div class="album-cover-container">
    <img src="{{ track.cover }}" alt="{{ track.name }}" class="album-cover" />
  </div>
  <div class="album-info">
    <h1 class="album-title">{{ track.title }}</h1>
    <p class="album-artist">
      <a
        href="{% url 'artist_page' track.artist|custom_slugify track.artist_id %}"
        class="artist-link">
        {{ track.artist }}
      </a>
      &middot; {{ track.release_year }}
    </p>
  </div>
</div>

<div class="editContainer">
  <table class="artistTable">
    <tr>
      <td>
        <input
          type="text"
          placeholder="Search"
          name="q"
          hx-get="/artist_search/"
          hx-trigger="keyup changed delay:500ms"
          hx-target="#artist-results" />
      </td>
    </tr>
    <tr>
      <td>
        <input
          type="text"
          placeholder="Search"
          name="q"
          hx-get="/artist_search/"
          hx-trigger="keyup changed delay:500ms"
          hx-target="artist-results" />
      </td>
    </tr>
    <tr>
      <td>
        <input
          type="text"
          placeholder="Search"
          name="q"
          hx-get="/artist_search/"
          hx-trigger="keyup changed delay:500ms"
          hx-target="artist-results" />
      </td>
    </tr>
    <tr>
      <td>
        <input
          type="text"
          placeholder="Search"
          name="q"
          hx-get="/artist_search/"
          hx-trigger="keyup changed delay:500ms"
          hx-target="artist-results" />
      </td>
    </tr>
  </table>
  <!-- 
  <form action="{% url 'save_artist' %}" method="POST">
    {% csrf_token %}
    <select name="artist_id" id="artist-dropdown">
      <option value="">Select an artist</option>
    </select>
    <button type="submit">Save</button>
  </form> -->

  <div id="artist-results">
    <!-- Search results will be injected here -->
  </div>

  <script>
    document.addEventListener("htmx:afterSwap", (event) => {
      if (event.detail.target.id === "artist-results") {
        const results = event.detail.target.innerHTML;
        const dropdown = document.getElementById("artist-dropdown");
        dropdown.innerHTML = results;
      }
    });
  </script>

  <table class="editTable">
    <tr id="headers">
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
    </tr>
    <tr>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
    </tr>
    <tr>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
    </tr>
    <tr>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
    </tr>
    <tr>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
      <td><input type="text" placeholder="Enter text" /></td>
    </tr>
  </table>
</div>
{% endblock %}
